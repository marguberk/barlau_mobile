# Подключение к базе данных BARLAU.KZ

## Настройка локального сервера

1. **Запуск Django сервера:**
   ```bash
   cd /Users/almaty/cursors/maro
   source venv311/bin/activate
   python manage.py runserver 0.0.0.0:8000
   ```

2. **Проверка IP адреса Mac:**
   ```bash
   ifconfig | grep "inet " | grep -v 127.0.0.1
   ```
   Текущий IP: `192.168.27.223`

## API Endpoints

- **Задачи:** `http://192.168.27.223:8000/api/tasks/`
- **Сотрудники:** `http://192.168.27.223:8000/api/employees/`
- **Транспорт:** `http://192.168.27.223:8000/api/vehicles/`

## Тестирование API

```bash
# Получить все задачи
curl -s "http://192.168.27.223:8000/api/tasks/" | jq '.count'

# Обновить статус задачи
curl -s -X PATCH "http://192.168.27.223:8000/api/tasks/1/" \
  -H "Content-Type: application/json" \
  -d '{"status": "IN_PROGRESS"}' | jq '.status'

# Статистика по статусам
curl -s "http://192.168.27.223:8000/api/tasks/" | \
  jq '.results | group_by(.status) | map({status: .[0].status, count: length})'
```

## Статусы задач

- `NEW` - К выполнению (новые задачи)
- `IN_PROGRESS` - В работе 
- `COMPLETED` - Выполнено

## Приоритеты

- `HIGH` - Высокий (красный, "Срочно")
- `MEDIUM` - Средний (синий, "Средний") 
- `LOW` - Низкий (зеленый, "Низкий")

## Отладка в Flutter

Приложение автоматически пробует подключиться к:
1. `http://192.168.27.223:8000/api/tasks/` (локальный сервер)
2. `http://localhost:8000/api/tasks/`
3. `http://127.0.0.1:8000/api/tasks/`
4. `http://85.202.192.33:8000/api/tasks/` (продакшн)

При успешном подключении отображается зеленый индикатор "Подключено к базе данных".
При ошибке подключения используются тестовые данные с красным индикатором.

## Логи

Для просмотра логов подключения к базе данных смотрите вывод в консоли Flutter:
- `Пробуем URL: ...`
- `Успешное подключение к: ...`
- `Загружено X задач из базы данных`
- `Статистика: NEW: X, IN_PROGRESS: X, COMPLETED: X` 
 
 
 
 