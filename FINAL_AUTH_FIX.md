# –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

## üîç –ü—Ä–æ–±–ª–µ–º–∞:

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–ª –æ—à–∏–±–∫—É 403 "Token is invalid or expired" –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫:
- –†–∞—Å—Ö–æ–¥—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ—è–≤–ª—è–ª–æ—Å—å —Å–æ–æ–±—â–µ–Ω–∏–µ "–†–∞—Å—Ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ"
- –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–∏—Å—å –º–µ–∂–¥—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏

## üîß –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–î–µ–º–æ —Ç–æ–∫–µ–Ω—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º API** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ–∫–µ–Ω—ã —Ç–∏–ø–∞ `demo_token`, `demo_driver_token`
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** - –¥–µ–º–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —á–µ—Ä–µ–∑ —Ä–µ–∞–ª—å–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
3. **–¢–æ–∫–µ–Ω—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –≤ SharedPreferences** - –¥–µ–º–æ —Ç–æ–∫–µ–Ω—ã –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ `SafeApiService`**

**–ë–´–õ–û:**
```dart
// –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–ª–∏—Å—å –¥–µ–º–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
if (username == 'admin' && password == 'admin') {
  // –°–æ–∑–¥–∞–≤–∞–ª—Å—è –¥–µ–º–æ —Ç–æ–∫–µ–Ω
  await prefs.setString('auth_token', 'demo_token');
}
```

**–°–¢–ê–õ–û:**
```dart
// –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º —Ä–µ–∞–ª—å–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ API
final result = await safeRequest('/auth/token/', 
  method: 'POST',
  body: {
    'username': username,
    'password': password,
  }
);

if (result['success'] && result['data'] != null) {
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –∏–∑ API
  final token = result['data']['access'] ?? result['data']['token'];
  await prefs.setString('auth_token', token);
} else {
  // –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–º–æ —Ç–æ–∫–µ–Ω—ã
  if (username == 'admin' && password == 'admin') {
    await prefs.setString('auth_token', 'demo_token');
  }
}
```

### 2. **–î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–µ–º–æ —Ç–æ–∫–µ–Ω–æ–≤**

```dart
// –î–ª—è –≤—Å–µ—Ö –¥–µ–º–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–∫–µ–Ω—ã
if (username == 'admin' && password == 'admin') {
  await prefs.setString('auth_token', 'demo_token'); // ‚Üê –î–û–ë–ê–í–õ–ï–ù–û
  await prefs.setString('user_role', 'SUPERADMIN');
  await prefs.setString('user_name', username);
}
```

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç AppHeader**

```dart
// –ë–´–õ–û:
import '../widgets/app_header.dart';

// –°–¢–ê–õ–û:
import '../components/app_header.dart';
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### **–®–∞–≥–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **–û—á–∏—Å—Ç–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
   - –í—ã–π–¥–∏—Ç–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –≤ –æ–±–æ–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö
   - –ò–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —ç–º—É–ª—è—Ç–æ—Ä–æ–≤

2. **–í–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ:**
   - `dispatcher / 123` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - `admin / admin`
   - `yunus / 123`
   - `arman / 123`

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª "–†–∞—Å—Ö–æ–¥—ã"
   - –ù–∞–∂–º–∏—Ç–µ "+" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ
   - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–†–∞—Å—Ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω" (–ù–ï "–¥–æ–±–∞–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ")

### **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

- ‚úÖ **–ù–µ—Ç –æ—à–∏–±–∫–∏ 403** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤
- ‚úÖ **–ù–µ—Ç –æ—à–∏–±–∫–∏ "Token is invalid or expired"**
- ‚úÖ **–†–∞—Å—Ö–æ–¥—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –º–µ–∂–¥—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–î–∏–∑–∞–π–Ω** –æ—Å—Ç–∞–µ—Ç—Å—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º

## üì± –°—Ç–∞—Ç—É—Å –∑–∞–ø—É—Å–∫–∞:

- ‚úÖ **Django —Å–µ—Ä–≤–µ—Ä:** –ó–∞–ø—É—â–µ–Ω (http://localhost:8000)
- ‚úÖ **Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** –ó–∞–ø—É—â–µ–Ω–æ (emulator-5554)
- ‚úÖ **iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** –ó–∞–ø—É—â–µ–Ω–æ (350BB8E1-7D11-42D8-9F31-E1E1C38A9957)

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç:

**–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!**

- –†–µ–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ API —Ä–∞–±–æ—Ç–∞–µ—Ç
- –î–µ–º–æ —Ç–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –†–∞—Å—Ö–æ–¥—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ 