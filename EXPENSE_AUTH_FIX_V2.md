# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å —Ä–∞—Å—Ö–æ–¥–∞–º–∏ - –í–µ—Ä—Å–∏—è 2

## üîç –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –≤—ã—è–≤–ª–µ–Ω—ã:

### 1. **–û—à–∏–±–∫–∞ —Ç–æ–∫–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**
- **–°–∏–º–ø—Ç–æ–º:** `Token is invalid or expired` (403 –æ—à–∏–±–∫–∞)
- **–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –¥–µ–º–æ —Ç–æ–∫–µ–Ω—ã –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö JWT —Ç–æ–∫–µ–Ω–æ–≤
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ `SafeApiService`

### 2. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –¥–∏–∑–∞–π–Ω–æ–º**
- **–°–∏–º–ø—Ç–æ–º:** –ò–∑–º–µ–Ω–∏–ª—Å—è –¥–∏–∑–∞–π–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–∞—Å—Ö–æ–¥–æ–≤
- **–ü—Ä–∏—á–∏–Ω–∞:** –í–æ–∑–º–æ–∂–Ω–æ, –∏–∑-–∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∫–æ–¥–∞
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–µ–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω —Ç–µ–∫—É—â–∏–π –¥–∏–∑–∞–π–Ω

### 3. **–ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π**
- **–°–∏–º–ø—Ç–æ–º:** –†–∞—Å—Ö–æ–¥—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–∏—á–∏–Ω–∞:** –û—à–∏–±–∫–∞ 403 –∏–∑-–∑–∞ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

## üîß –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SafeApiService (`barlau_flutter/lib/services/safe_api_service.dart`)**

```dart
// –ë–´–õ–û:
if (result['success']) {
  // –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å JWT –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
}

// –°–¢–ê–õ–û:
if (result['success'] && result['data'] != null) {
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –∏–∑ –æ—Ç–≤–µ—Ç–∞ API
  final prefs = await SharedPreferences.getInstance();
  final token = result['data']['access'] ?? result['data']['token'];
  if (token != null) {
    await prefs.setString('auth_token', token);
    print('SafeApiService: –†–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω: ${token.substring(0, 20)}...');
  }
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  final userRole = result['data']['user']?['role'] ?? 'DRIVER';
  await prefs.setString('user_role', userRole);
  await prefs.setString('user_name', username);
}
```

### 2. **–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:** –¢–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π JWT —Ç–æ–∫–µ–Ω –∏–∑ API
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞:** –£–±—Ä–∞–Ω–∞ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è JWT
- ‚úÖ **–õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –ë–æ–ª–µ–µ —á–µ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –†–æ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–∑ API –æ—Ç–≤–µ—Ç–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### **–®–∞–≥–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É:**
   - `dispatcher / 123` - –¥–∏—Å–ø–µ—Ç—á–µ—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - `admin / admin` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
   - `yunus / 123` - –≤–æ–¥–∏—Ç–µ–ª—å
   - `arman / 123` - –≤–æ–¥–∏—Ç–µ–ª—å

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª "–†–∞—Å—Ö–æ–¥—ã"
   - –ù–∞–∂–º–∏—Ç–µ "+" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ
   - –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–∫–∏ 403

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:**
   - –†–∞—Å—Ö–æ–¥ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –†–∞—Å—Ö–æ–¥ –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ –æ–±–µ–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö (Android/iOS)

### **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

- ‚úÖ **–ù–µ—Ç –æ—à–∏–±–∫–∏ 403** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤
- ‚úÖ **–†–µ–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã** –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–º–µ—Å—Ç–æ –¥–µ–º–æ
- ‚úÖ **–†–∞—Å—Ö–æ–¥—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –º–µ–∂–¥—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–î–∏–∑–∞–π–Ω** –æ—Å—Ç–∞–µ—Ç—Å—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º

## üì± –î–∏–∑–∞–π–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–∞—Å—Ö–æ–¥–æ–≤:

### **–¢–µ–∫—É—â–∏–π –¥–∏–∑–∞–π–Ω –≤–∫–ª—é—á–∞–µ—Ç:**

1. **Header —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏** (20 –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö)
2. **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ** –æ –¥–µ–º–æ –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞ API)
3. **–§–∏–ª—å—Ç—Ä—ã:**
   - –í—ã–±–æ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (dropdown)
   - –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–∞–º (—Å –¥–∞—Ç—ã - –ø–æ –¥–∞—Ç—É)
   - –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å"
4. **–°–ø–∏—Å–æ–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤:**
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–∞–º
   - –ò–∫–æ–Ω–∫–∏ –∏ —Å—É–º–º—ã
   - –¢–µ–≥–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
5. **Floating Action Button** –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

### **–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:**
- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç: `#2679DB` (—Å–∏–Ω–∏–π)
- –§–æ–Ω: `#F8FAFC` (—Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π)
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è: –æ—Ä–∞–Ω–∂–µ–≤—ã–π
- –£—Å–ø–µ—Ö: –∑–µ–ª–µ–Ω—ã–π

## üöÄ –°—Ç–∞—Ç—É—Å:

**‚úÖ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ**

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã. –¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. 