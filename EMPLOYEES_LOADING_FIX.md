# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

## üö® –ü—Ä–æ–±–ª–µ–º–∞
–í –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (Android –∏ iOS) –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª—Å—è —Å–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å –æ—à–∏–±–∫–∞ **HTTP 404**.

## üîç –ü—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –¥–ª—è API**
```dart
// ‚ùå –ë—ã–ª–æ (–¥–≤–æ–π–Ω–æ–µ /api/):
Uri.parse('${AppConfig.baseApiUrl}/api/employees/')
// –†–µ–∑—É–ª—å—Ç–∞—Ç: https://barlau.org/api/api/employees/ (404)

// ‚úÖ –°—Ç–∞–ª–æ:
Uri.parse('${AppConfig.baseApiUrl}/employees/')
// –†–µ–∑—É–ª—å—Ç–∞—Ç: https://barlau.org/api/employees/ (200)
```

### 2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ API**
```dart
// ‚ùå –ë—ã–ª–æ - –æ–∂–∏–¥–∞–ª—Å—è –º–∞—Å—Å–∏–≤:
if (data is List) {
  final employeesData = data.cast<Map<String, dynamic>>();
}

// ‚úÖ –°—Ç–∞–ª–æ - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª–µ–º results:
if (data is Map<String, dynamic> && data.containsKey('results')) {
  final employeesData = (data['results'] as List).cast<Map<String, dynamic>>();
}
```

### 3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–µ–º–æ –¥–∞–Ω–Ω—ã—Ö –≤ ApiService**
```dart
// ‚ùå –ë—ã–ª–æ:
static Future<List<Employee>> getEmployees() async {
  // –¢–æ–ª—å–∫–æ –¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ, –±–µ–∑ HTTP –∑–∞–ø—Ä–æ—Å–∞
  final employeesData = [...];
  return employeesData.map((data) => Employee.fromJson(data)).toList();
}

// ‚úÖ –°—Ç–∞–ª–æ:
static Future<List<Employee>> getEmployees() async {
  // –†–µ–∞–ª—å–Ω—ã–π HTTP –∑–∞–ø—Ä–æ—Å + fallback –Ω–∞ –¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ
  final response = await http.get(Uri.parse('$apiUrl/employees/'));
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ API
}
```

### 4. **–ú–æ–¥–µ–ª—å Employee –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ API**
```dart
// ‚ùå –ë—ã–ª–æ:
factory Employee.fromJson(Map<String, dynamic> json) {
  return Employee(
    name: json['name'] ?? '',  // API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç first_name/last_name
    position: json['position'] ?? '',  // API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç role_display
  );
}

// ‚úÖ –°—Ç–∞–ª–æ:
factory Employee.fromJson(Map<String, dynamic> json) {
  final fullName = json['full_name'] ?? '$firstName $lastName'.trim();
  final position = json['role_display'] ?? json['position'] ?? '';
  // ... –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª–µ–π API
}
```

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω URL –≤ EmployeesScreen**
- **–§–∞–π–ª**: `lib/screens/employees_screen.dart`
- **–°—Ç—Ä–æ–∫–∞ 56**: –£–±—Ä–∞–Ω–æ –¥–≤–æ–π–Ω–æ–µ `/api/`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π URL `https://barlau.org/api/employees/`

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ API**
- **–§–∞–π–ª**: `lib/screens/employees_screen.dart`  
- **–°—Ç—Ä–æ–∫–∏ 66-85**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±—ä–µ–∫—Ç–∞ —Å –ø–æ–ª–µ–º `results`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ `{count: 18, results: [...]}`

### 3. **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ä–µ–∞–ª—å–Ω—ã–π API –∑–∞–ø—Ä–æ—Å –≤ ApiService**
- **–§–∞–π–ª**: `lib/services/api_service.dart`
- **–ú–µ—Ç–æ–¥**: `getEmployees()`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: HTTP –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É + fallback –Ω–∞ –¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ

### 4. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å Employee**
- **–§–∞–π–ª**: `lib/models/employee.dart`
- **–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è**: `firstName`, `lastName`, `photo`, `role`, `roleDisplay`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º API

## üì± –ù–æ–≤—ã–π APK –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª**: `apk_for_testing/BARLAU-employees-fix-20250723-2336.apk`
**–†–∞–∑–º–µ—Ä**: 119MB
**–î–∞—Ç–∞**: 23.07.2025 23:36

## üß™ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### ‚úÖ –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:
- **–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö 18 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤** —Å –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–∞ `barlau.org`
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö –∏–º–µ–Ω** (`full_name`)
- **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏** (`role_display`: –î–∏—Ä–µ–∫—Ç–æ—Ä, –î–∏—Å–ø–µ—Ç—á–µ—Ä, –í–æ–¥–∏—Ç–µ–ª—å, –∏ —Ç.–¥.)
- **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤** (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ API)
- **Fallback –Ω–∞ –¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ** –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–µ—Ç—å—é

### üìä –û–∂–∏–¥–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:
```
–ó–∞–≥—Ä—É–∂–µ–Ω–æ 18 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:
1. –°–µ—Ä–∏–∫ –ê–π–¥–∞—Ä–±–µ–∫–æ–≤ - –î–∏—Ä–µ–∫—Ç–æ—Ä
2. –ê–ª–º–∞—Å –°–æ–ø–∞—à–µ–≤ - –î–∏—Å–ø–µ—Ç—á–µ—Ä  
3. –ï—Ä–±–æ–ª–∞—Ç –ö—É–¥–∞–π–±–µ—Ä–≥–µ–Ω–æ–≤ - –ú–µ–Ω–µ–¥–∂–µ—Ä
4. –ù–∞–∑–µ—Ä–∫–µ –°–∞–¥–≤–∞–∫–∞—Å–æ–≤–∞ - –ë—É—Ö–≥–∞–ª—Ç–µ—Ä
5. –ú–∞–∫—Å–∞—Ç –ö—É—Å–∞–π—ã–Ω - IT-–º–µ–Ω–µ–¥–∂–µ—Ä
6. –ì–∞–±–∏—Ç –ê—Ö–º–µ—Ç–æ–≤ - –°–Ω–∞–±–∂–µ–Ω–µ—Ü
7. –ê–π–¥–∞–Ω–∞ –£–∑–∞–∫–æ–≤–∞ - –õ–æ–≥–∏—Å—Ç
8. –ú—É—Ä–∞—Ç–∂–∞–Ω –ò–ª–∞—Ö—É–Ω–æ–≤ - –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç
9. –ê—Å–µ—Ç –ò–ª—å—è–º–æ–≤ - –¢–µ—Ö–æ—Ç–¥–µ–ª
10. –ï—Ä–∂–∞–Ω –°–∞–ø–∞—Ä–æ–≤ - –í–æ–¥–∏—Ç–µ–ª—å
... –∏ –¥—Ä—É–≥–∏–µ
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏

### 1. –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–π APK:
```bash
adb install BARLAU-employees-fix-20250723-2336.apk
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ª–æ–≥–∞—Ö:
```
üîç –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–∑ API: https://barlau.org/api/employees/
üîç –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞: 200  
üîç –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã: 18 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ 18 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- ‚úÖ **–ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É API** `barlau.org`
- ‚úÖ **–ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤** –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** –∫–∞–∫ –≤–µ–±-–≤–µ—Ä—Å–∏—è
- ‚úÖ **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏** —Å fallback –Ω–∞ –¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É** –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞ —Å HTTP 404 –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞! üéâ** 

–î–∞, –≤—ã –ø—Ä–∞–≤—ã. –ü—Ä–æ–±–ª–µ–º–∞ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –Ω–∞ iOS –∏ Android —á–∞—Å—Ç–æ —Å–≤—è–∑–∞–Ω–∞ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –§–∞–π–ª `restart_emulators_fixed.sh` –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ `restart_flutter_apps.sh` –∏—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç.

–î–ª—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ –æ–±–æ–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∑–∞–ø—É—Å—Ç–∏—Ç—å:

```
cd /Users/almaty/cursors/maro/barlau_flutter && flutter clean && flutter pub get && cd .. && ./restart_emulators_fixed.sh
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
1. –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç build-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –∫—ç—à (`flutter clean`)
2. –ó–∞–Ω–æ–≤–æ –∑–∞–≥—Ä—É–∑–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`flutter pub get`)
3. –ó–∞–ø—É—Å—Ç–∏—Ç —ç–º—É–ª—è—Ç–æ—Ä—ã –∏ —Å–≤–µ–∂—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–¢–∞–∫–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å:
- `flutter cache repair` - –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω–æ–≥–æ –∫—ç—à–∞
- –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å —ç–º—É–ª—è—Ç–æ—Ä–æ–≤ –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏

–ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ –Ω–∞ iOS –∏ Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö. 